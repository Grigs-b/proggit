import sys

test = '''.....................................
...#######################...........
...#.....................#...........
...#.....................#...........
...#.....................#...........
...#.....................#...........
...#.....................#...........
...#.....................#######.....
...###.................##......#.....
...#..##.............##........#.....
...#....##.........##..........#.....
...#......##.....##............#.....
...#........#####..............#.....
...#........#..................#.....
...#.......##..................#.....
...#.....##....................#.....
...#...##......................#.....
...#############################.....
.....................................
.....................................
.....................................
.....................................'''

torus = '''\/\/\/\.\\
/./..././
\.\.\.\.\\
/.../.../
\/\/\/\/\\
/.../.../
\.\.\.\.\\
/./..././
\/\/\/\.\\'''

def fill(grid, x, y, target, replacement):
    y = y % len(grid)
    x = x % len(grid[0])
    if grid[y][x] != target:
        return grid
    if grid[y][x] == target:
        grid[y] = "".join([grid[y][:x],replacement,grid[y][x+1:]])

    fill(grid, x-1, y, target, replacement)
    fill(grid, x+1, y, target, replacement)
    fill(grid, x, y-1, target, replacement)
    fill(grid, x, y+1, target, replacement)
    return grid

def parse_grid(input):
    return input.split('\n')

if __name__ == "__main__":
    test = parse_grid(torus)
    print("Before:")
    for line in test:
        print(line)
    result = fill(test, 1, 7, target=test[7][1], replacement='@')
    print("After:")
    for line in result:
        print(line)
